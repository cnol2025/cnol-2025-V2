"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_pages-dir-node_components_QRCodeScanner_js";
exports.ids = ["_pages-dir-node_components_QRCodeScanner_js"];
exports.modules = {

/***/ "(pages-dir-node)/./components/QRCodeScanner.js":
/*!*************************************!*\
  !*** ./components/QRCodeScanner.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ QRCodeScanner)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var html5_qrcode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! html5-qrcode */ \"html5-qrcode\");\n/* harmony import */ var html5_qrcode__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(html5_qrcode__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nfunction QRCodeScanner({ onScanSuccess, onScanError }) {\n    const qrRegionId = 'html5qr-code-region';\n    const html5QrCodeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"QRCodeScanner.useEffect\": ()=>{\n            let isMounted = true;\n            const qrCode = new html5_qrcode__WEBPACK_IMPORTED_MODULE_2__.Html5Qrcode(qrRegionId);\n            html5QrCodeRef.current = qrCode;\n            async function startScanner() {\n                try {\n                    const devices = await html5_qrcode__WEBPACK_IMPORTED_MODULE_2__.Html5Qrcode.getCameras();\n                    if (devices && devices.length > 0 && isMounted) {\n                        const cameraId = devices[0].id;\n                        await qrCode.start(cameraId, {\n                            fps: 10,\n                            qrbox: {\n                                width: 250,\n                                height: 250\n                            }\n                        }, {\n                            \"QRCodeScanner.useEffect.startScanner\": (decodedText)=>{\n                                if (isMounted) onScanSuccess(decodedText);\n                            }\n                        }[\"QRCodeScanner.useEffect.startScanner\"], {\n                            \"QRCodeScanner.useEffect.startScanner\": (errorMessage)=>{\n                                if (isMounted && onScanError) onScanError(errorMessage);\n                            }\n                        }[\"QRCodeScanner.useEffect.startScanner\"]);\n                    } else {\n                        console.error('Pas de caméra trouvée');\n                        if (onScanError) onScanError('Pas de caméra trouvée');\n                    }\n                } catch (err) {\n                    console.error('Erreur au démarrage du scanner', err);\n                    if (onScanError) onScanError(err.toString());\n                }\n            }\n            startScanner();\n            return ({\n                \"QRCodeScanner.useEffect\": ()=>{\n                    isMounted = false;\n                    if (html5QrCodeRef.current) {\n                        html5QrCodeRef.current.stop().then({\n                            \"QRCodeScanner.useEffect\": ()=>html5QrCodeRef.current.clear()\n                        }[\"QRCodeScanner.useEffect\"]).catch({\n                            \"QRCodeScanner.useEffect\": ()=>{\n                            // ignore errors on stop\n                            }\n                        }[\"QRCodeScanner.useEffect\"]);\n                    }\n                }\n            })[\"QRCodeScanner.useEffect\"];\n        }\n    }[\"QRCodeScanner.useEffect\"], [\n        onScanSuccess,\n        onScanError\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        id: qrRegionId,\n        style: {\n            width: '100%'\n        }\n    }, void 0, false, {\n        fileName: \"/home/runner/workspace/components/QRCodeScanner.js\",\n        lineNumber: 53,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvUVJDb2RlU2Nhbm5lci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUEwQztBQUNDO0FBRTVCLFNBQVNHLGNBQWMsRUFBRUMsYUFBYSxFQUFFQyxXQUFXLEVBQUU7SUFDbEUsTUFBTUMsYUFBYTtJQUNuQixNQUFNQyxpQkFBaUJOLDZDQUFNQSxDQUFDO0lBRTlCRCxnREFBU0E7bUNBQUM7WUFDUixJQUFJUSxZQUFZO1lBQ2hCLE1BQU1DLFNBQVMsSUFBSVAscURBQVdBLENBQUNJO1lBQy9CQyxlQUFlRyxPQUFPLEdBQUdEO1lBRXpCLGVBQWVFO2dCQUNiLElBQUk7b0JBQ0YsTUFBTUMsVUFBVSxNQUFNVixxREFBV0EsQ0FBQ1csVUFBVTtvQkFDNUMsSUFBSUQsV0FBV0EsUUFBUUUsTUFBTSxHQUFHLEtBQUtOLFdBQVc7d0JBQzlDLE1BQU1PLFdBQVdILE9BQU8sQ0FBQyxFQUFFLENBQUNJLEVBQUU7d0JBQzlCLE1BQU1QLE9BQU9RLEtBQUssQ0FDaEJGLFVBQ0E7NEJBQUVHLEtBQUs7NEJBQUlDLE9BQU87Z0NBQUVDLE9BQU87Z0NBQUtDLFFBQVE7NEJBQUk7d0JBQUU7b0VBQzlDLENBQUNDO2dDQUNDLElBQUlkLFdBQVdKLGNBQWNrQjs0QkFDL0I7O29FQUNBLENBQUNDO2dDQUNDLElBQUlmLGFBQWFILGFBQWFBLFlBQVlrQjs0QkFDNUM7O29CQUVKLE9BQU87d0JBQ0xDLFFBQVFDLEtBQUssQ0FBQzt3QkFDZCxJQUFJcEIsYUFBYUEsWUFBWTtvQkFDL0I7Z0JBQ0YsRUFBRSxPQUFPcUIsS0FBSztvQkFDWkYsUUFBUUMsS0FBSyxDQUFDLGtDQUFrQ0M7b0JBQ2hELElBQUlyQixhQUFhQSxZQUFZcUIsSUFBSUMsUUFBUTtnQkFDM0M7WUFDRjtZQUVBaEI7WUFFQTsyQ0FBTztvQkFDTEgsWUFBWTtvQkFDWixJQUFJRCxlQUFlRyxPQUFPLEVBQUU7d0JBQzFCSCxlQUFlRyxPQUFPLENBQ25Ca0IsSUFBSSxHQUNKQyxJQUFJO3VEQUFDLElBQU10QixlQUFlRyxPQUFPLENBQUNvQixLQUFLO3NEQUN2Q0MsS0FBSzt1REFBQzs0QkFDTCx3QkFBd0I7NEJBQzFCOztvQkFDSjtnQkFDRjs7UUFDRjtrQ0FBRztRQUFDM0I7UUFBZUM7S0FBWTtJQUUvQixxQkFBTyw4REFBQzJCO1FBQUloQixJQUFJVjtRQUFZMkIsT0FBTztZQUFFYixPQUFPO1FBQU87Ozs7OztBQUNyRCIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jb21wb25lbnRzL1FSQ29kZVNjYW5uZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBIdG1sNVFyY29kZSB9IGZyb20gJ2h0bWw1LXFyY29kZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFFSQ29kZVNjYW5uZXIoeyBvblNjYW5TdWNjZXNzLCBvblNjYW5FcnJvciB9KSB7XG4gIGNvbnN0IHFyUmVnaW9uSWQgPSAnaHRtbDVxci1jb2RlLXJlZ2lvbic7XG4gIGNvbnN0IGh0bWw1UXJDb2RlUmVmID0gdXNlUmVmKG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGlzTW91bnRlZCA9IHRydWU7XG4gICAgY29uc3QgcXJDb2RlID0gbmV3IEh0bWw1UXJjb2RlKHFyUmVnaW9uSWQpO1xuICAgIGh0bWw1UXJDb2RlUmVmLmN1cnJlbnQgPSBxckNvZGU7XG5cbiAgICBhc3luYyBmdW5jdGlvbiBzdGFydFNjYW5uZXIoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkZXZpY2VzID0gYXdhaXQgSHRtbDVRcmNvZGUuZ2V0Q2FtZXJhcygpO1xuICAgICAgICBpZiAoZGV2aWNlcyAmJiBkZXZpY2VzLmxlbmd0aCA+IDAgJiYgaXNNb3VudGVkKSB7XG4gICAgICAgICAgY29uc3QgY2FtZXJhSWQgPSBkZXZpY2VzWzBdLmlkO1xuICAgICAgICAgIGF3YWl0IHFyQ29kZS5zdGFydChcbiAgICAgICAgICAgIGNhbWVyYUlkLFxuICAgICAgICAgICAgeyBmcHM6IDEwLCBxcmJveDogeyB3aWR0aDogMjUwLCBoZWlnaHQ6IDI1MCB9IH0sXG4gICAgICAgICAgICAoZGVjb2RlZFRleHQpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGlzTW91bnRlZCkgb25TY2FuU3VjY2VzcyhkZWNvZGVkVGV4dCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKGVycm9yTWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICBpZiAoaXNNb3VudGVkICYmIG9uU2NhbkVycm9yKSBvblNjYW5FcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignUGFzIGRlIGNhbcOpcmEgdHJvdXbDqWUnKTtcbiAgICAgICAgICBpZiAob25TY2FuRXJyb3IpIG9uU2NhbkVycm9yKCdQYXMgZGUgY2Ftw6lyYSB0cm91dsOpZScpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIGF1IGTDqW1hcnJhZ2UgZHUgc2Nhbm5lcicsIGVycik7XG4gICAgICAgIGlmIChvblNjYW5FcnJvcikgb25TY2FuRXJyb3IoZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN0YXJ0U2Nhbm5lcigpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzTW91bnRlZCA9IGZhbHNlO1xuICAgICAgaWYgKGh0bWw1UXJDb2RlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgaHRtbDVRckNvZGVSZWYuY3VycmVudFxuICAgICAgICAgIC5zdG9wKClcbiAgICAgICAgICAudGhlbigoKSA9PiBodG1sNVFyQ29kZVJlZi5jdXJyZW50LmNsZWFyKCkpXG4gICAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgb24gc3RvcFxuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtvblNjYW5TdWNjZXNzLCBvblNjYW5FcnJvcl0pO1xuXG4gIHJldHVybiA8ZGl2IGlkPXtxclJlZ2lvbklkfSBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19IC8+O1xufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsIkh0bWw1UXJjb2RlIiwiUVJDb2RlU2Nhbm5lciIsIm9uU2NhblN1Y2Nlc3MiLCJvblNjYW5FcnJvciIsInFyUmVnaW9uSWQiLCJodG1sNVFyQ29kZVJlZiIsImlzTW91bnRlZCIsInFyQ29kZSIsImN1cnJlbnQiLCJzdGFydFNjYW5uZXIiLCJkZXZpY2VzIiwiZ2V0Q2FtZXJhcyIsImxlbmd0aCIsImNhbWVyYUlkIiwiaWQiLCJzdGFydCIsImZwcyIsInFyYm94Iiwid2lkdGgiLCJoZWlnaHQiLCJkZWNvZGVkVGV4dCIsImVycm9yTWVzc2FnZSIsImNvbnNvbGUiLCJlcnJvciIsImVyciIsInRvU3RyaW5nIiwic3RvcCIsInRoZW4iLCJjbGVhciIsImNhdGNoIiwiZGl2Iiwic3R5bGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/QRCodeScanner.js\n");

/***/ })

};
;